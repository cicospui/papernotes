# Dumbo:Faster Asynchronous BFT Protocol

## 摘要

HoneyBadgerBFT (HB-BFT) 的核心是使用 Ben-Or 等人的异步公共子集协议 (ACS) 实现批处理共识，由 n 个可靠广播协议 (RBC) 构成，让每个节点提出其输入，然后是 n异步二进制协议协议 (ABA) 为每个建议值做出决定（n 是节点总数）。

本文提出了两个新的原子广播协议（Dumbo1, Dumbo2），Dumbo1 的 ACS 仅运行小的 κ（独立于 n）个 ABA 实例，而 Dumbo2 的 ACS 进一步将其减少为常量！我们技术的核心是两个主要观察结果：（1）减少 ABA 实例的数量显着提高了效率； (2) 使用多值验证拜占庭一致性协议（MVBA）在HoneyBFT中被认为对ACS不是最优的，但是如果更加仔细地使用MVBA，实际上可以导致更高效的ACS。

实验结果表明延迟和吞吐量方面，比Honey BFT实现了多倍改进，当系统变得适度大时。

## Intro

BFT的主要场景面对良好的网络连接，故对BFT的研究工作集中在减少加密（计算）上，或者提升参与者门槛从而假设是同步网络。但出于实用性考虑，鲁棒性和效率的原因使我们不得不考虑去除同步假设。

PBFT 在“间歇同步网络”中无法取得任何进展，在这种网络中，对手只会选择在特定时间点延迟消息。 “攻击”可以类似地应用于一类基于领导者的拜占庭容错协议。

使用异步协议在实际构建分布式系统中就大大简化了工程工作，因为不需要设置超时机制，而同步协议往往要设置复杂的超时机制。

原子广播协议就是BFT协议的连续执行，以维护一个不断增长的日志，就可很容易地构建异步公共子集。Ben等人的ACS协议由两个子协议构建：RBC和ABA，节点通过调用RBC来广播其输入值，并参与ABA协议的n个实例商定输入子集。

本文在HBBFT的基础上考虑：是否能通过重新设计ACS以提高渐进效率与实际效率。

## 本文贡献

设计了两个新的ACS协议，相同环境下运行结果优于HBBFT，并得到两个结论：1.ABA实例的数量应该减少；2.使用MVBA协议在ACS中可能效果更好。

### Dumbo1

由于著名FLP不可能原理，ABA必须是随机协议。N个并发ABA会话的预期轮数至少达到了O(logn)。但实际的ABA非并发，所有ABA实例的启动时间可能不同且普通节点也面临着大规模并发执行导致的效率下降，实际的复杂度会更高。N变大且网络不稳定时，ABA实例可能会非常慢，而最慢的ABA实例决定了HBBFT的ACS运行时间。

实验得出ABA的运行时间在ACS中占主导地位：![dumbo1](D:\科研\论文笔记\figs\dumbo_01.png)

为了减少ABA实例的数量，重新设计了ACS结构，提出了Dumbo1-ACS。该方案只需运行k个而非n个ABA实例，并实现了O（logk）的运行时间。其他复杂性指标不变。









## ADD

目前多数互联网公司的分布式系统大多是部署的同步共识协议，因为同步共识协议往往具有更好的性能，但也i因此易受到网络攻击。高效的异步共识协议很难设计，因为FLP不可能定理的原因。但近年来有学者尝试引入随机化的算法设计异步共识协议。

### HBBFT的瓶颈

由于所有异步共识协议都是随机化的协议，故二元共识协议ABA也是随机化的协议。

若并行执行大量随机化协议，协议的终止时间是取决于**最慢**那个ABA实例的。只要有一个慢，整个系统都会慢。

事实上，协议进行的轮数和并发执行的协议实例数量有关。实验结果发现：ABA实例的运行时间占据了绝大部分。本文的优化目标就成了：优化掉上图的蓝色柱子。

### 优化方法Dumbo1

HBBFT需要对每个单独交易执行一个ABA投票，本文则是降低了ABA的数量以实现更高效的结果。

具体来说：不对每个单独的交易投票，而是对每个输入向量投票。

过程为：选出一个包含少数成员的委员会，只要委员会中有一个成员是诚实的。委员会成员再次广播已经收到的元素向量的索引，其他方则是查看自己是否也收到了向量索引集合中的对应全部值，就给对应的ABA投票1。此时的ABA是对每个向量的投票，而非每个节点的ABA。此时的ABA数量也就依赖于了安全参数（其实就是委员会成员数）。

### 优化方法Dumbo2

更进一步，把二元共识协议数量降到最低。

其实最后只需要输出一个向量，只是不知道是哪个，整个协议过程就是在尽量找到要输出哪个向量。

广播阶段结束时，每个节点其实都准备好了一个向量，只是还不知道输出哪个向量。便尝试去使用多值可验证拜占庭MVBA协议。

引入MVBA协议，就需要使所有参与方最终都输出一个相同的向量。这一目标通过**扩展的可靠广播协议**实现，只需要在广播中增加一个证明，以证明有足够数量的诚实参与方收到了交易，如使用门限签名。

但HBBFT认为MVBA是次优的，因为其潜在的通信复杂度很大，因此Dumbo通过特殊处理使MVBA的输入变得非常小。dumbo中的MVBA输入只有索引集合和一个非常简短的证明，这样，协议的通信复杂度不变，但其中的ABA数量被降到了最低。