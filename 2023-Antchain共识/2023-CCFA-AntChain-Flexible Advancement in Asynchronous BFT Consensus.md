# Flexible Advancement in Asynchronous BFT Consensus

## INTRO

BFT共识协议中，基于领导者的协议都是由leader负责**提出客户端请求并对其进行排序**的，是现有区块链系统共识的一个大方向。

但现实是，区块链系统多在WAN下部署，节点数量可能成百上千，每个节点可能有专门的客户，且不希望将区块生成委托给其他节点。这就需要一个**高效、可扩展且无领导**的共识协议。

部分同步协议是不足以使用的，一是延迟不稳定，二是领导者的性能瓶颈。而异步协议不依赖时序假设，且以**平等**的方式进行。在BKR模式中，每个节点并行提出请求，每个提案要么提交，要么中止，并加入了随机化来规避FLP不可能性。但现在仍面临两个方面的问题：

> 一是负载较轻或不平衡的情况下，即使节点没有提议请求，每个节点都必须参加每个共识实例中的区块提议。
>
> 二是抛硬币阶段被放置在了协议的关键路径上，会大大增加大规模部署中的时间复杂度。

下图展示了BKR模式的一般流程，这种BKR的模式是多种异步SMR协议的核心组件：

![1](figs/antChain-MyTumbler&SuperMA/BKR的执行流.png)

同时，现有的异步协议使用**固定时隙**范例，为每个节点预先分配共识间隙，不仅浪费资源，并且容易引入提案间的竞争。f个节点可能会出现故障，那么异步协议允许n-f个节点快速推动系统前进，但同时也可能会中止慢速节点的提议。一个理想系统应该是这样的：

> 当某一时刻只有少数节点提议时，可以快速前进；
>
> 大多数节点都在提议时，可以适当放慢速度以容纳更多提议；

目前现有共识协议的情况根据是否**给每个节点分配协议槽**（Compulsory）和是否存在**领导者**（Dedicated）可以做以下分类，而MyTumbler对两者都没有要求：

![1](figs/antChain-MyTumbler&SuperMA/不同协议方案的比较.png)

因此本文提出了一种基于时间戳的BFT状态机复制（SMR）协议**MyTumbler**和一种高效的多值协议**SuperMA**。下表展示了两种协议的特点：

| 协议      | 特点                                                         |
| --------- | ------------------------------------------------------------ |
| MyTumbler | 1.每个节点只要有待处理请求就可以提出自己的建议（不同于基于领导者的协议）；<br />2.每个节点仅在有未决请求时才提议（不同于固定时隙的异步协议）。 |
| SuperMA   | 1.引入**承诺机制**绕过通常的随机化，只需三个通信阶段就可以确定性的终止；<br /> 2.正确节点对给定提案有不同看法时，通过抛硬币阶段打破平局。 |



## MyTumbler

### 灵活推进范式

SMR协议是实现共识的常用手段。

#### SMR协议





#### ARBC可中止的可靠广播















